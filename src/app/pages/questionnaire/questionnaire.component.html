<div class="container my-4">
  <div class="glass-container p-4">
    <h1>{{ 'questionnaire.title' | translate }}</h1>

    <div class="list-wrap">
      <div
        *ngIf="isLoading"
        class="d-flex justify-content-center align-items-center"
        style="min-height: 60vh;"
      >
        <div class="spinner-border" role="status">
          <span class="visually-hidden">{{ 'generic.loading' | translate }}</span>
        </div>
      </div>

      <ng-container *ngIf="!isLoading">
        <div
          *ngIf="thematiques && thematiques.length > 0; else emptyState"
          class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-2"
        >
          <div class="col mb-3" *ngFor="let t of thematiques; let i = index">
            <div class="card-wrapper h-100">
              <app-card
                [mode]="'questionnaire'"
                [id]="t.id"
                [title]="t.titre"
                [description]="t.description"
                [publicationDate]="t.dateOuvertureSession"
                [sessionCloseDate]="t.dateFermetureSession"
                [isSessionOpen]="isSessionOpen(t)"
              ></app-card>
            </div>
          </div>
        </div>

        <ng-template #emptyState>
          <div
            class="d-flex flex-column justify-content-center align-items-center"
            style="min-height: 60vh;"
          >
            <p class="mb-3 fs-5">
              {{ 'questionnaire.emptyLead' | translate }}
            </p>
            <h2 class="mb-3">{{ 'questionnaire.emptyTitle' | translate }}</h2>
            <img
              src="assets/images/empty-folder.png"
              [attr.alt]="'questionnaire.emptyTitle' | translate"
              class="img-fluid"
              style="max-width: 200px;"
            />
          </div>
        </ng-template>
      </ng-container>
    </div>

    <nav
      *ngIf="thematiques?.length && totalPages > 1"
      class="pagination-wrap d-flex justify-content-center mt-4"
      aria-label="Pagination des questionnaires"
    >
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="firstPage()" [disabled]="currentPage === 1">&laquo;</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="prevPage()" [disabled]="currentPage === 1">{{ 'pagination.prev' | translate }}</button>
        </li>

        <li class="page-item" *ngFor="let p of pageNumbers" [class.active]="p === currentPage">
          <button class="page-link" (click)="goToPage(p)">{{ p }}</button>
        </li>

        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="nextPage()" [disabled]="currentPage === totalPages">{{ 'pagination.next' | translate }}</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="lastPage()" [disabled]="currentPage === totalPages">&raquo;</button>
        </li>
      </ul>
    </nav>
  </div>
</div>

